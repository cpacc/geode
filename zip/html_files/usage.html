<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Using geode | GEODE USER’S MANUAL</title>
  <meta name="description" content="Chapter 2 Using geode | GEODE USER’S MANUAL" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Using geode | GEODE USER’S MANUAL" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Using geode | GEODE USER’S MANUAL" />
  
  
  



<meta name="date" content="2021-03-31" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="background.html"/>
<link rel="next" href="details.html"/>
<script src="libs/header-attrs-2.8/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Sections</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="background.html"><a href="background.html"><i class="fa fa-check"></i><b>1</b> Background</a>
<ul>
<li class="chapter" data-level="1.1" data-path="background.html"><a href="background.html#purpose"><i class="fa fa-check"></i><b>1.1</b> Purpose</a></li>
<li class="chapter" data-level="1.2" data-path="background.html"><a href="background.html#system-requirements"><i class="fa fa-check"></i><b>1.2</b> System requirements</a></li>
<li class="chapter" data-level="1.3" data-path="background.html"><a href="background.html#downloading-and-installing"><i class="fa fa-check"></i><b>1.3</b> Downloading and installing</a></li>
<li class="chapter" data-level="1.4" data-path="background.html"><a href="background.html#help-files"><i class="fa fa-check"></i><b>1.4</b> Help files</a></li>
<li class="chapter" data-level="1.5" data-path="background.html"><a href="background.html#boundary-files-and-sample-data-sets"><i class="fa fa-check"></i><b>1.5</b> Boundary files and sample data sets</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="usage.html"><a href="usage.html"><i class="fa fa-check"></i><b>2</b> Using geode</a>
<ul>
<li class="chapter" data-level="2.1" data-path="usage.html"><a href="usage.html#structure-of-the-tool"><i class="fa fa-check"></i><b>2.1</b> Structure of the tool</a></li>
<li class="chapter" data-level="2.2" data-path="usage.html"><a href="usage.html#getting-started"><i class="fa fa-check"></i><b>2.2</b> Getting started</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="usage.html"><a href="usage.html#setup"><i class="fa fa-check"></i><b>2.2.1</b> Setup</a></li>
<li class="chapter" data-level="2.2.2" data-path="usage.html"><a href="usage.html#importing-data-with-geo_import"><i class="fa fa-check"></i><b>2.2.2</b> Importing data with <code>geo_import()</code></a></li>
<li class="chapter" data-level="2.2.3" data-path="usage.html"><a href="usage.html#creating-maps-with-geo_plot"><i class="fa fa-check"></i><b>2.2.3</b> Creating maps with <code>geo_plot()</code></a></li>
<li class="chapter" data-level="2.2.4" data-path="usage.html"><a href="usage.html#generating-spatial-statistics-with-geo_calculate"><i class="fa fa-check"></i><b>2.2.4</b> Generating spatial statistics with <code>geo_calculate()</code></a></li>
<li class="chapter" data-level="2.2.5" data-path="usage.html"><a href="usage.html#additional-information-on-exporting-output"><i class="fa fa-check"></i><b>2.2.5</b> Additional information on exporting output</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="details.html"><a href="details.html"><i class="fa fa-check"></i><b>3</b> Technical details</a>
<ul>
<li class="chapter" data-level="3.1" data-path="details.html"><a href="details.html#geo_import"><i class="fa fa-check"></i><b>3.1</b> <code>geo_import()</code></a></li>
<li class="chapter" data-level="3.2" data-path="details.html"><a href="details.html#geo_plot"><i class="fa fa-check"></i><b>3.2</b> <code>geo_plot()</code></a></li>
<li class="chapter" data-level="3.3" data-path="details.html"><a href="details.html#geo_distance"><i class="fa fa-check"></i><b>3.3</b> <code>geo_distance()</code></a></li>
<li class="chapter" data-level="3.4" data-path="details.html"><a href="details.html#geo_detect"><i class="fa fa-check"></i><b>3.4</b> <code>geo_detect()</code></a></li>
<li class="chapter" data-level="3.5" data-path="details.html"><a href="details.html#geo_calculate"><i class="fa fa-check"></i><b>3.5</b> <code>geo_calculate()</code></a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="details.html"><a href="details.html#global-spatial-autocorrelation"><i class="fa fa-check"></i><b>3.5.1</b> global spatial autocorrelation</a></li>
<li class="chapter" data-level="3.5.2" data-path="details.html"><a href="details.html#local-spatial-autocorrelation"><i class="fa fa-check"></i><b>3.5.2</b> local spatial autocorrelation</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="details.html"><a href="details.html#geo_export"><i class="fa fa-check"></i><b>3.6</b> <code>geo_export()</code></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="examples.html"><a href="examples.html"><i class="fa fa-check"></i><b>4</b> Examples</a>
<ul>
<li class="chapter" data-level="4.1" data-path="examples.html"><a href="examples.html#example-1-importing-and-wrangling-data"><i class="fa fa-check"></i><b>4.1</b> Example 1: Importing and wrangling data</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="examples.html"><a href="examples.html#background-1"><i class="fa fa-check"></i><b>4.1.1</b> Background</a></li>
<li class="chapter" data-level="4.1.2" data-path="examples.html"><a href="examples.html#setup-1"><i class="fa fa-check"></i><b>4.1.2</b> Setup</a></li>
<li class="chapter" data-level="4.1.3" data-path="examples.html"><a href="examples.html#data-importation"><i class="fa fa-check"></i><b>4.1.3</b> Data importation</a></li>
<li class="chapter" data-level="4.1.4" data-path="examples.html"><a href="examples.html#data-wrangling"><i class="fa fa-check"></i><b>4.1.4</b> Data wrangling</a></li>
<li class="chapter" data-level="4.1.5" data-path="examples.html"><a href="examples.html#data-export"><i class="fa fa-check"></i><b>4.1.5</b> Data export</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="examples.html"><a href="examples.html#example-2-mapping-and-proximity-analysis"><i class="fa fa-check"></i><b>4.2</b> Example 2: mapping and proximity analysis</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="examples.html"><a href="examples.html#background-2"><i class="fa fa-check"></i><b>4.2.1</b> Background</a></li>
<li class="chapter" data-level="4.2.2" data-path="examples.html"><a href="examples.html#setup-2"><i class="fa fa-check"></i><b>4.2.2</b> Setup</a></li>
<li class="chapter" data-level="4.2.3" data-path="examples.html"><a href="examples.html#importing-data"><i class="fa fa-check"></i><b>4.2.3</b> Importing data</a></li>
<li class="chapter" data-level="4.2.4" data-path="examples.html"><a href="examples.html#creating-maps"><i class="fa fa-check"></i><b>4.2.4</b> Creating maps</a></li>
<li class="chapter" data-level="4.2.5" data-path="examples.html"><a href="examples.html#running-a-proximity-analysis"><i class="fa fa-check"></i><b>4.2.5</b> Running a proximity analysis</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="examples.html"><a href="examples.html#example-3-cluster-detection"><i class="fa fa-check"></i><b>4.3</b> Example 3: Cluster detection</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="examples.html"><a href="examples.html#background-3"><i class="fa fa-check"></i><b>4.3.1</b> Background</a></li>
<li class="chapter" data-level="4.3.2" data-path="examples.html"><a href="examples.html#setup-3"><i class="fa fa-check"></i><b>4.3.2</b> Setup</a></li>
<li class="chapter" data-level="4.3.3" data-path="examples.html"><a href="examples.html#importing-data-1"><i class="fa fa-check"></i><b>4.3.3</b> Importing data</a></li>
<li class="chapter" data-level="4.3.4" data-path="examples.html"><a href="examples.html#simulating-health-event-data"><i class="fa fa-check"></i><b>4.3.4</b> Simulating health event data</a></li>
<li class="chapter" data-level="4.3.5" data-path="examples.html"><a href="examples.html#detecting-clusters"><i class="fa fa-check"></i><b>4.3.5</b> Detecting clusters</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="help.html"><a href="help.html"><i class="fa fa-check"></i><b>5</b> Help files</a>
<ul>
<li class="chapter" data-level="5.1" data-path="help.html"><a href="help.html#geo_import-1"><i class="fa fa-check"></i><b>5.1</b> <code>geo_import()</code></a></li>
<li class="chapter" data-level="5.2" data-path="help.html"><a href="help.html#geo_plot-1"><i class="fa fa-check"></i><b>5.2</b> <code>geo_plot()</code></a></li>
<li class="chapter" data-level="5.3" data-path="help.html"><a href="help.html#geo_distance-1"><i class="fa fa-check"></i><b>5.3</b> <code>geo_distance()</code></a></li>
<li class="chapter" data-level="5.4" data-path="help.html"><a href="help.html#geo_detect-1"><i class="fa fa-check"></i><b>5.4</b> <code>geo_detect()</code></a></li>
<li class="chapter" data-level="5.5" data-path="help.html"><a href="help.html#geo_calculate-1"><i class="fa fa-check"></i><b>5.5</b> <code>geo_calculate()</code></a></li>
<li class="chapter" data-level="5.6" data-path="help.html"><a href="help.html#geo_export-1"><i class="fa fa-check"></i><b>5.6</b> <code>geo_export()</code></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="refs.html"><a href="refs.html"><i class="fa fa-check"></i><b>6</b> References</a>
<ul>
<li class="chapter" data-level="6.1" data-path="refs.html"><a href="refs.html#key-references"><i class="fa fa-check"></i><b>6.1</b> Key references</a></li>
<li class="chapter" data-level="6.2" data-path="refs.html"><a href="refs.html#additional-resources"><i class="fa fa-check"></i><b>6.2</b> Additional resources</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="refs.html"><a href="refs.html#books"><i class="fa fa-check"></i><b>6.2.1</b> Books</a></li>
<li class="chapter" data-level="6.2.2" data-path="refs.html"><a href="refs.html#papers"><i class="fa fa-check"></i><b>6.2.2</b> Papers</a></li>
<li class="chapter" data-level="6.2.3" data-path="refs.html"><a href="refs.html#websites-and-online-courses"><i class="fa fa-check"></i><b>6.2.3</b> Websites and online courses</a></li>
<li class="chapter" data-level="6.2.4" data-path="refs.html"><a href="refs.html#tutorials-and-examples"><i class="fa fa-check"></i><b>6.2.4</b> Tutorials and examples</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Created with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">GEODE USER’S MANUAL</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="usage" class="section level1" number="2">
<h1><span class="header-section-number">Chapter 2</span> Using geode</h1>
<p>In this chapter, we briefly review the structure of the <strong>geode</strong> software tool and then work through an initial example to help new users get started.</p>
<div id="structure-of-the-tool" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Structure of the tool</h2>
<p>The <strong>geode</strong> tool is designed as a set of compatible functions that can be used individually or together to map and analyze geospatial data.</p>
<p><img src="geode_functions_figure.png" style="width:70.0%" /></p>
<p>In the current version the core functions are</p>
<p><code>geo_import()</code> for importing geographic boundary data and attribute data<br />
<code>geo_plot()</code> for plotting maps<br />
<code>geo_calculate()</code> for calculating (and mapping) spatial statistics<br />
<code>geo_distance()</code> for running distance-based proximity analysis<br />
<code>geo_detect()</code> for detecting significant spatial clusters<br />
<code>geo_export()</code> for exporting spatial and attribute data to other file formats.</p>
<p>The design of <strong>geode</strong> is flexible and allows the easy addition of new functions in subsequent versions of the tool.</p>
<p>Important details on each function can be found in Chapter <a href="details.html#details">3</a>, and in the associated help documentation in Chapter <a href="help.html#help">5</a>, and through the available help files in R. Users should review these details to ensure a full understanding of geode output.</p>
</div>
<div id="getting-started" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Getting started</h2>
<p>After installing the <strong>geode</strong> package, it is recommended that new users work through the following example in order to become acquainted with the basic usage of the <strong>geode</strong> tool. This example works through several functions quickly and is only meant to give users a general sense of how the tool works, before delving into the technical details of each function.</p>
<p>The example provides a brief introduction to three of the core functions: <code>geo_import()</code>, <code>geo_plot()</code> and <code>geo_calculate()</code>.</p>
<p>Supporting information, such as details of the specific syntax for each function, is found in the help files as described below.</p>
<p>Note that in this example only the <strong>geode</strong> package is loaded by default. Hence, any functions that are used from other R packages are always called explicity using the syntax package_name::function_name. For example, the filter function from the tidyverse package <strong>dplyr</strong> is called in the script using <code>dplyr::filter()</code>.</p>
<p>Users are free to load other packages to support additional data manipulation if desired.</p>
<div id="setup" class="section level3" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Setup</h3>
<p>First, begin by loading the geode package using the R function <code>library()</code>.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="usage.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(geode)</span></code></pre></div>
<p>It is good practice to define any needed folder paths (e.g., input or output locations) or data files at the beginning of your script. Here, we define an input directory and the names of two data files. These files are provided with the <strong>geode</strong> package, but originate from freely available Statistic Canada datafiles.</p>
<p><em>Note that in R, all file and folder paths must be specified using forward slashes ‘/.’</em></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="usage.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># location of input data (modify as needed for your computer)</span></span>
<span id="cb13-2"><a href="usage.html#cb13-2" aria-hidden="true" tabindex="-1"></a>indir <span class="ot">&lt;-</span> <span class="st">&quot;C:/Users/Michael/Documents/R/working dir/geode_prototype/data&quot;</span></span>
<span id="cb13-3"><a href="usage.html#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="usage.html#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># names of data files to be imported</span></span>
<span id="cb13-5"><a href="usage.html#cb13-5" aria-hidden="true" tabindex="-1"></a>shape_file_da <span class="ot">&lt;-</span> <span class="st">&quot;geode_data_spatial_da.shp&quot;</span></span>
<span id="cb13-6"><a href="usage.html#cb13-6" aria-hidden="true" tabindex="-1"></a>source_file_pop <span class="ot">&lt;-</span> <span class="st">&quot;geode_data_pop_da.csv&quot;</span></span></code></pre></div>
</div>
<div id="importing-data-with-geo_import" class="section level3" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> Importing data with <code>geo_import()</code></h3>
<p>To begin, see the help file for <code>geo_import()</code>, which describes it’s usage, arguments and further details. Whenever you have questions about the use of this function, call the help file.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="usage.html#cb14-1" aria-hidden="true" tabindex="-1"></a>?geo_import</span></code></pre></div>
<p>Try importing the spatial data file we defined above (‘shape_file_da’) using the following code. Shapefiles can be optionally simplified during import, which creates a smaller, more efficient, working file (but note that simplified files are usually only appropriate for experimental use).</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="usage.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># shapefile not simplified on import</span></span>
<span id="cb15-2"><a href="usage.html#cb15-2" aria-hidden="true" tabindex="-1"></a>my_dat <span class="ot">&lt;-</span> <span class="fu">geo_import</span>(<span class="at">path =</span> <span class="fu">paste</span>(indir, shape_file_da, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb15-3"><a href="usage.html#cb15-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">filetype =</span> <span class="st">&#39;spatial&#39;</span>,</span>
<span id="cb15-4"><a href="usage.html#cb15-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">simplify =</span> <span class="cn">FALSE</span>)</span>
<span id="cb15-5"><a href="usage.html#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="usage.html#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co"># shapefile simplified on import</span></span>
<span id="cb15-7"><a href="usage.html#cb15-7" aria-hidden="true" tabindex="-1"></a>my_dat_simple <span class="ot">&lt;-</span> <span class="fu">geo_import</span>(<span class="at">path =</span> <span class="fu">paste</span>(indir, shape_file_da, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb15-8"><a href="usage.html#cb15-8" aria-hidden="true" tabindex="-1"></a>                     <span class="at">filetype =</span> <span class="st">&#39;spatial&#39;</span>,</span>
<span id="cb15-9"><a href="usage.html#cb15-9" aria-hidden="true" tabindex="-1"></a>                     <span class="at">simplify =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>After importing, inspect the variables present in the data. Geographic boundary data should always contain a ‘geometry’ column.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="usage.html#cb16-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">glimpse</span>(my_dat)</span></code></pre></div>
<p>How big are the imported shapefiles? This is important to know, as all imported files are brought into memory and may affect the performance of your computer if RAM is limited. Check using the R function <code>object.size()</code>.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="usage.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">object.size</span>(my_dat) <span class="co"># original DA file ~ 250MB</span></span>
<span id="cb17-2"><a href="usage.html#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">object.size</span>(my_dat_simple) <span class="co"># simplified DA file ~ 75MB</span></span></code></pre></div>
<p>Now, import the attribute datafile we defined above (‘source_file_pop’). Attribute data contains characteristics of the spatial units, such as population size.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="usage.html#cb18-1" aria-hidden="true" tabindex="-1"></a>my_pop <span class="ot">&lt;-</span> <span class="fu">geo_import</span>(<span class="at">path =</span> <span class="fu">paste</span>(indir, source_file_pop, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb18-2"><a href="usage.html#cb18-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">filetype =</span> <span class="st">&#39;attribute&#39;</span>)</span></code></pre></div>
<p>Inspect variables in attribute data.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="usage.html#cb19-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">glimpse</span>(my_pop)</span></code></pre></div>
</div>
<div id="creating-maps-with-geo_plot" class="section level3" number="2.2.3">
<h3><span class="header-section-number">2.2.3</span> Creating maps with <code>geo_plot()</code></h3>
<p>To begin, see the help file for <code>geo_plot()</code>, which covers it’s usage, arguments and further details. Whenever you have questions about the use of this function, call the help file.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="usage.html#cb20-1" aria-hidden="true" tabindex="-1"></a>?geo_plot</span></code></pre></div>
<p>Subset the data for plotting. Here we filter to include only the Census Division (variable CDNAME) of Greater Vancouver.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="usage.html#cb21-1" aria-hidden="true" tabindex="-1"></a>my_plot_dat <span class="ot">&lt;-</span> my_dat <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="usage.html#cb21-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(CDNAME <span class="sc">==</span> <span class="st">&#39;Greater Vancouver&#39;</span>)</span></code></pre></div>
<p>Generate a static map using the default settings (i.e., specify only required arguments)</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="usage.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">geo_plot</span>(<span class="at">data =</span> my_plot_dat, </span>
<span id="cb22-2"><a href="usage.html#cb22-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">geography_col =</span> CCSNAME, </span>
<span id="cb22-3"><a href="usage.html#cb22-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">plot_type =</span> <span class="st">&#39;choropleth&#39;</span>)</span></code></pre></div>
<p><img src="greater_van_map.png" style="width:60.0%" /></p>
<p>Generate an interactive map using the default settings (i.e., specify only required arguments). With interactive maps, users can turn background layers on/off, scroll in any direction, zoom in/out, and hover over areas to obtain further information. (Note that these background layers are loaded from an online repository, hence users must have an active internet connection).</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="usage.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">geo_plot</span>(<span class="at">data =</span> my_plot_dat, </span>
<span id="cb23-2"><a href="usage.html#cb23-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">geography_col =</span> CCSNAME, </span>
<span id="cb23-3"><a href="usage.html#cb23-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">plot_type =</span> <span class="st">&#39;choropleth&#39;</span>,</span>
<span id="cb23-4"><a href="usage.html#cb23-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">interactive =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="greater_van_map_interactive.png" style="width:60.0%" /></p>
<p>Also note that the information displayed when hovering over a region in an interactive map can be specified using the <code>hover_id</code> argument. By default, <strong>geode</strong> displays the name/value contained in the column specified by the <code>geography_col</code> argument. However, any column in the input dataset can be specified by <code>hover_id</code>, giving users the option to display, for example, the regional population size or event rate of interest.</p>
<p>If more visibility of the underlying reference layer is desired, the shading of the choropleth map can be adjusted using the <code>transparency =</code> argument, with values between 0 (transparent) and 1 (opaque).</p>
<p>Next, generate a static map including optional settings (e.g., include plot title, scale and compass, but drop legend).</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="usage.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">geo_plot</span>(<span class="at">data =</span> my_plot_dat,</span>
<span id="cb24-2"><a href="usage.html#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">geography_col =</span> CCSNAME,</span>
<span id="cb24-3"><a href="usage.html#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">plot_type =</span> <span class="st">&#39;choropleth&#39;</span>,</span>
<span id="cb24-4"><a href="usage.html#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">plot_title =</span> <span class="st">&#39;My GEO_PLOT Map&#39;</span>,</span>
<span id="cb24-5"><a href="usage.html#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend_title =</span> <span class="st">&#39;none&#39;</span> ,</span>
<span id="cb24-6"><a href="usage.html#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">scale_bar =</span> <span class="cn">TRUE</span>,</span>
<span id="cb24-7"><a href="usage.html#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">compass =</span> <span class="cn">TRUE</span>,</span>
<span id="cb24-8"><a href="usage.html#cb24-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">interactive =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="greater_van_map2.png" style="width:60.0%" /></p>
<p>Finally, export the plot for later use. First create the plot as an R object ‘my_plot.’</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="usage.html#cb25-1" aria-hidden="true" tabindex="-1"></a>my_plot <span class="ot">&lt;-</span> <span class="fu">geo_plot</span>(<span class="at">data =</span> my_plot_dat,</span>
<span id="cb25-2"><a href="usage.html#cb25-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">geography_col =</span> CCSNAME,</span>
<span id="cb25-3"><a href="usage.html#cb25-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">plot_type =</span> <span class="st">&#39;choropleth&#39;</span>,</span>
<span id="cb25-4"><a href="usage.html#cb25-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">plot_title =</span> <span class="st">&#39;My GEO_PLOT Map&#39;</span>,</span>
<span id="cb25-5"><a href="usage.html#cb25-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">legend_title =</span> <span class="st">&#39;none&#39;</span> ,</span>
<span id="cb25-6"><a href="usage.html#cb25-6" aria-hidden="true" tabindex="-1"></a>                    <span class="at">scale_bar =</span> <span class="cn">TRUE</span>,</span>
<span id="cb25-7"><a href="usage.html#cb25-7" aria-hidden="true" tabindex="-1"></a>                    <span class="at">compass =</span> <span class="cn">TRUE</span>,</span>
<span id="cb25-8"><a href="usage.html#cb25-8" aria-hidden="true" tabindex="-1"></a>                    <span class="at">interactive =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>Then, export as an image file:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="usage.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># specify output location and file name for plot</span></span>
<span id="cb26-2"><a href="usage.html#cb26-2" aria-hidden="true" tabindex="-1"></a>outdir <span class="ot">&lt;-</span> <span class="st">&quot;C:/Users/Michael/Documents/R/working dir/output&quot;</span></span>
<span id="cb26-3"><a href="usage.html#cb26-3" aria-hidden="true" tabindex="-1"></a>outfile <span class="ot">&lt;-</span> <span class="st">&quot;my_plot.png&quot;</span> <span class="co"># note file extension .png</span></span>
<span id="cb26-4"><a href="usage.html#cb26-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-5"><a href="usage.html#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="co"># exporting as an image using png() function </span></span>
<span id="cb26-6"><a href="usage.html#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="fu">png</span>(<span class="at">filename =</span> <span class="fu">paste</span>(outdir, outfile, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb26-7"><a href="usage.html#cb26-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">height =</span> <span class="dv">4</span>, <span class="at">width =</span> <span class="dv">6</span>, <span class="at">units =</span> <span class="st">&quot;in&quot;</span>, <span class="at">res =</span> <span class="dv">300</span>) <span class="co"># 4&quot; x 6&quot; image, resolution 300 dpi</span></span>
<span id="cb26-8"><a href="usage.html#cb26-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-9"><a href="usage.html#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(my_plot)</span>
<span id="cb26-10"><a href="usage.html#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
<p>Here we used the <code>png()</code> function to export a .png file. Other available functions, with similar syntax, can be used to export images: <code>bmp()</code>, <code>jpeg()</code> and <code>tiff()</code>.</p>
<p>Or, export as a pdf:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="usage.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># specify output location and file name for plot</span></span>
<span id="cb27-2"><a href="usage.html#cb27-2" aria-hidden="true" tabindex="-1"></a>outdir <span class="ot">&lt;-</span> <span class="st">&quot;C:/Users/Michael/Documents/R/working dir/output&quot;</span></span>
<span id="cb27-3"><a href="usage.html#cb27-3" aria-hidden="true" tabindex="-1"></a>outfile <span class="ot">&lt;-</span> <span class="st">&quot;my_plot.pdf&quot;</span> <span class="co"># note file extention .pdf</span></span>
<span id="cb27-4"><a href="usage.html#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="usage.html#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="fu">pdf</span>(<span class="at">file =</span> <span class="fu">paste</span>(outdir, outfile, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb27-6"><a href="usage.html#cb27-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">width =</span> <span class="fl">8.5</span>, <span class="at">height =</span> <span class="dv">11</span>) <span class="co"># 8.5&quot; x 11&quot; output size</span></span>
<span id="cb27-7"><a href="usage.html#cb27-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-8"><a href="usage.html#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(my_plot)</span>
<span id="cb27-9"><a href="usage.html#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
<p>For additional information and options available when exporting plots as images or pdf, see the corresponding help files <code>?png</code> or <code>?pdf</code>.</p>
<p><strong>A note about map colour styles:</strong> When generating maps, users can select from a range of predefined colour palettes or define their own (see style argument under <code>?geo_plot</code>). The above examples were generated using the built-in ‘zissou’ style, but users are encouraged to examine other colour schemes or to create their own.</p>
</div>
<div id="generating-spatial-statistics-with-geo_calculate" class="section level3" number="2.2.4">
<h3><span class="header-section-number">2.2.4</span> Generating spatial statistics with <code>geo_calculate()</code></h3>
<p>To begin, see the help file for <code>geo_calculate()</code>, which covers it’s usage, arguments and further details. Whenever you have questions about the use of this function, call the help file.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="usage.html#cb28-1" aria-hidden="true" tabindex="-1"></a>?geo_calculate</span></code></pre></div>
<p>Import the provided BC data with Dissemination Areas (DAs) and population sizes:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="usage.html#cb29-1" aria-hidden="true" tabindex="-1"></a>bc_dat <span class="ot">&lt;-</span> <span class="fu">geo_import</span>(<span class="at">path =</span> <span class="fu">paste</span>(indir, <span class="st">&#39;geode_data_bc_da_pop.shp&#39;</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>),</span>
<span id="cb29-2"><a href="usage.html#cb29-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">filetype =</span> <span class="st">&#39;spatial&#39;</span>)</span></code></pre></div>
<p>Subset data to only DAs in Census Division (variable CDNAME) of Central Okanagan:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="usage.html#cb30-1" aria-hidden="true" tabindex="-1"></a>OK_dat <span class="ot">&lt;-</span> bc_dat <span class="sc">%&gt;%</span></span>
<span id="cb30-2"><a href="usage.html#cb30-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(CDNAME <span class="sc">==</span> <span class="st">&#39;Central Okanagan&#39;</span>)</span></code></pre></div>
<p>First, we test for global spatial autocorrelation and generate a standard statistical plot (Moran’s I scatterplot). As an illustration, we run our analysis on population density (variable ‘density’):</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="usage.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">geo_calculate</span>(<span class="at">data =</span> OK_dat, </span>
<span id="cb31-2"><a href="usage.html#cb31-2" aria-hidden="true" tabindex="-1"></a>              <span class="at">var =</span> density, </span>
<span id="cb31-3"><a href="usage.html#cb31-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">statistic =</span> <span class="st">&#39;global_ac&#39;</span>, </span>
<span id="cb31-4"><a href="usage.html#cb31-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">create_plot =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>Here, <code>geo_calculate()</code> ouputs the test statistic and p-value associated with the test for global spatial autocorrelation:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="usage.html#cb32-1" aria-hidden="true" tabindex="-1"></a>  statistic                         simulations test_statistic p_value</span>
<span id="cb32-2"><a href="usage.html#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>                                   <span class="er">&lt;</span>int<span class="sc">&gt;</span>          <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>   <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb32-3"><a href="usage.html#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> Monte<span class="sc">-</span>Carlo simulation of Moran I       <span class="dv">10000</span>          <span class="fl">0.537</span>  <span class="fl">0.0001</span></span></code></pre></div>
<p><img src="morans_scatterplot.png" style="width:50.0%" /></p>
<p>Next, we calculate local spatial autocorrelation and generate an output dataset. Again, we use the population density variable for this analysis, as an illustrative example.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="usage.html#cb33-1" aria-hidden="true" tabindex="-1"></a>localg <span class="ot">&lt;-</span> <span class="fu">geo_calculate</span>(<span class="at">data =</span> OK_dat, </span>
<span id="cb33-2"><a href="usage.html#cb33-2" aria-hidden="true" tabindex="-1"></a>              <span class="at">var =</span> density, </span>
<span id="cb33-3"><a href="usage.html#cb33-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">statistic =</span> <span class="st">&#39;local_ac&#39;</span>, </span>
<span id="cb33-4"><a href="usage.html#cb33-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">create_plot =</span> <span class="cn">FALSE</span>)</span>
<span id="cb33-5"><a href="usage.html#cb33-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-6"><a href="usage.html#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="co"># see output file</span></span>
<span id="cb33-7"><a href="usage.html#cb33-7" aria-hidden="true" tabindex="-1"></a>localg</span></code></pre></div>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="usage.html#cb34-1" aria-hidden="true" tabindex="-1"></a>Simple feature collection with <span class="dv">255</span> features and <span class="dv">9</span> fields</span>
<span id="cb34-2"><a href="usage.html#cb34-2" aria-hidden="true" tabindex="-1"></a>geometry type<span class="sc">:</span>  MULTIPOLYGON</span>
<span id="cb34-3"><a href="usage.html#cb34-3" aria-hidden="true" tabindex="-1"></a>dimension<span class="sc">:</span>      XY</span>
<span id="cb34-4"><a href="usage.html#cb34-4" aria-hidden="true" tabindex="-1"></a>bbox<span class="sc">:</span>           xmin<span class="sc">:</span> <span class="dv">4245014</span> ymin<span class="sc">:</span> <span class="dv">1925870</span> xmax<span class="sc">:</span> <span class="dv">4333571</span> ymax<span class="sc">:</span> <span class="dv">1993292</span></span>
<span id="cb34-5"><a href="usage.html#cb34-5" aria-hidden="true" tabindex="-1"></a>projected CRS<span class="sc">:</span>  PCS_Lambert_Conformal_Conic</span>
<span id="cb34-6"><a href="usage.html#cb34-6" aria-hidden="true" tabindex="-1"></a>First <span class="dv">10</span> features<span class="sc">:</span></span>
<span id="cb34-7"><a href="usage.html#cb34-7" aria-hidden="true" tabindex="-1"></a>      DAUID                                  PRNAME           CDNAME CSDNAME  pop dwellings density</span>
<span id="cb34-8"><a href="usage.html#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>  <span class="dv">59350077</span> British Columbia <span class="sc">/</span> Colombie<span class="sc">-</span>Britannique Central Okanagan Kelowna <span class="dv">2693</span>      <span class="dv">1531</span>   <span class="fl">140.4</span></span>
<span id="cb34-9"><a href="usage.html#cb34-9" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>  <span class="dv">59350078</span> British Columbia <span class="sc">/</span> Colombie<span class="sc">-</span>Britannique Central Okanagan Kelowna  <span class="dv">517</span>       <span class="dv">251</span>   <span class="fl">414.0</span></span>
<span id="cb34-10"><a href="usage.html#cb34-10" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>  <span class="dv">59350079</span> British Columbia <span class="sc">/</span> Colombie<span class="sc">-</span>Britannique Central Okanagan Kelowna  <span class="dv">736</span>       <span class="dv">317</span>  <span class="fl">2251.5</span></span>
<span id="cb34-11"><a href="usage.html#cb34-11" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>  <span class="dv">59350080</span> British Columbia <span class="sc">/</span> Colombie<span class="sc">-</span>Britannique Central Okanagan Kelowna  <span class="dv">971</span>       <span class="dv">380</span>  <span class="fl">3383.3</span></span>
<span id="cb34-12"><a href="usage.html#cb34-12" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>  <span class="dv">59350081</span> British Columbia <span class="sc">/</span> Colombie<span class="sc">-</span>Britannique Central Okanagan Kelowna  <span class="dv">623</span>       <span class="dv">225</span>  <span class="fl">3014.0</span></span>
<span id="cb34-13"><a href="usage.html#cb34-13" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>  <span class="dv">59350082</span> British Columbia <span class="sc">/</span> Colombie<span class="sc">-</span>Britannique Central Okanagan Kelowna  <span class="dv">479</span>       <span class="dv">180</span>  <span class="fl">2453.9</span></span>
<span id="cb34-14"><a href="usage.html#cb34-14" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span>  <span class="dv">59350083</span> British Columbia <span class="sc">/</span> Colombie<span class="sc">-</span>Britannique Central Okanagan Kelowna  <span class="dv">363</span>       <span class="dv">165</span>  <span class="fl">3579.9</span></span>
<span id="cb34-15"><a href="usage.html#cb34-15" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span>  <span class="dv">59350086</span> British Columbia <span class="sc">/</span> Colombie<span class="sc">-</span>Britannique Central Okanagan Kelowna  <span class="dv">662</span>       <span class="dv">398</span>  <span class="fl">7339.2</span></span>
<span id="cb34-16"><a href="usage.html#cb34-16" aria-hidden="true" tabindex="-1"></a><span class="dv">9</span>  <span class="dv">59350087</span> British Columbia <span class="sc">/</span> Colombie<span class="sc">-</span>Britannique Central Okanagan Kelowna  <span class="dv">363</span>       <span class="dv">215</span>  <span class="fl">3276.2</span></span>
<span id="cb34-17"><a href="usage.html#cb34-17" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="dv">59350088</span> British Columbia <span class="sc">/</span> Colombie<span class="sc">-</span>Britannique Central Okanagan Kelowna  <span class="dv">866</span>       <span class="dv">315</span>  <span class="fl">4686.1</span></span>
<span id="cb34-18"><a href="usage.html#cb34-18" aria-hidden="true" tabindex="-1"></a>                         geometry     localg           cluster</span>
<span id="cb34-19"><a href="usage.html#cb34-19" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>  <span class="fu">MULTIPOLYGON</span> (((<span class="dv">4293883</span> <span class="dv">195</span>... <span class="sc">-</span><span class="fl">2.6903611</span> Cold spot<span class="sc">:</span> <span class="dv">99</span>% CI</span>
<span id="cb34-20"><a href="usage.html#cb34-20" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>  <span class="fu">MULTIPOLYGON</span> (((<span class="dv">4290959</span> <span class="dv">194</span>... <span class="sc">-</span><span class="fl">0.7791236</span>   Not significant</span>
<span id="cb34-21"><a href="usage.html#cb34-21" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>  <span class="fu">MULTIPOLYGON</span> (((<span class="dv">4290580</span> <span class="dv">194</span>...  <span class="fl">0.5233985</span>   Not significant</span>
<span id="cb34-22"><a href="usage.html#cb34-22" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>  <span class="fu">MULTIPOLYGON</span> (((<span class="dv">4290653</span> <span class="dv">194</span>...  <span class="fl">1.1537163</span>   Not significant</span>
<span id="cb34-23"><a href="usage.html#cb34-23" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>  <span class="fu">MULTIPOLYGON</span> (((<span class="dv">4290245</span> <span class="dv">194</span>...  <span class="fl">0.3777174</span>   Not significant</span>
<span id="cb34-24"><a href="usage.html#cb34-24" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>  <span class="fu">MULTIPOLYGON</span> (((<span class="dv">4289926</span> <span class="dv">194</span>...  <span class="fl">2.0569677</span>  Hot spot<span class="sc">:</span> <span class="dv">95</span>% CI</span>
<span id="cb34-25"><a href="usage.html#cb34-25" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span>  <span class="fu">MULTIPOLYGON</span> (((<span class="dv">4289680</span> <span class="dv">194</span>...  <span class="fl">2.8679259</span> Hot spot<span class="sc">:</span>  <span class="dv">99</span>% CI</span>
<span id="cb34-26"><a href="usage.html#cb34-26" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span>  <span class="fu">MULTIPOLYGON</span> (((<span class="dv">4289142</span> <span class="dv">194</span>...  <span class="fl">3.5445971</span> Hot spot<span class="sc">:</span>  <span class="dv">99</span>% CI</span>
<span id="cb34-27"><a href="usage.html#cb34-27" aria-hidden="true" tabindex="-1"></a><span class="dv">9</span>  <span class="fu">MULTIPOLYGON</span> (((<span class="dv">4289005</span> <span class="dv">194</span>...  <span class="fl">4.0291994</span> Hot spot<span class="sc">:</span>  <span class="dv">99</span>% CI</span>
<span id="cb34-28"><a href="usage.html#cb34-28" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="fu">MULTIPOLYGON</span> (((<span class="dv">4288792</span> <span class="dv">194</span>...  <span class="fl">2.4985473</span>  Hot spot<span class="sc">:</span> <span class="dv">95</span>% CI</span></code></pre></div>
<p>We see that the output includes each of the regions present in our analysis dataset, but now the test statistic (‘localg’) and significance category (‘cluster’) have been added.</p>
<p>We can export this output data for later use, using the <code>geo_export()</code> function:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="usage.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># output path and filename</span></span>
<span id="cb35-2"><a href="usage.html#cb35-2" aria-hidden="true" tabindex="-1"></a>outfile <span class="ot">&lt;-</span> <span class="st">&quot;C:/Users/Michael/Documents/R/working dir/output/my_local_ac&quot;</span></span>
<span id="cb35-3"><a href="usage.html#cb35-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-4"><a href="usage.html#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co"># export as shapefile (because output still contains geometry data)</span></span>
<span id="cb35-5"><a href="usage.html#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="fu">geo_export</span>(<span class="at">x =</span> localg,</span>
<span id="cb35-6"><a href="usage.html#cb35-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">path =</span> outfile,</span>
<span id="cb35-7"><a href="usage.html#cb35-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">filetype =</span> <span class="st">&quot;shp&quot;</span>)</span></code></pre></div>
<p>Finally, we calculate local spatial autocorrelation but now also generate an interactive map showing the significant hotspots and coldspots</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="usage.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">geo_calculate</span>(<span class="at">data =</span> OK_dat, </span>
<span id="cb36-2"><a href="usage.html#cb36-2" aria-hidden="true" tabindex="-1"></a>              <span class="at">var =</span> density, </span>
<span id="cb36-3"><a href="usage.html#cb36-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">statistic =</span> <span class="st">&#39;local_ac&#39;</span>, </span>
<span id="cb36-4"><a href="usage.html#cb36-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">create_plot =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="hotspot_map2.png" style="width:60.0%" />
As with <code>geo_plot()</code> the transparency of the choropleth map can be adjusted to reveal more or less of the background reference layer (using the <code>transparency =</code> argument), and the information shown when hovering over a region can be modified (any column in the input dataset can be specified with the <code>hover_id =</code> argument).</p>
</div>
<div id="additional-information-on-exporting-output" class="section level3" number="2.2.5">
<h3><span class="header-section-number">2.2.5</span> Additional information on exporting output</h3>
<p>The <strong>geode</strong> package contains a specific function, <code>geo_export()</code>, for saving spatial and attribute data to a file. More information on this function can be found in chapters <a href="details.html#details">3</a> and <a href="help.html#help">5</a> and examples can be found in chapter <a href="examples.html#examples">4</a>. Note that this function is only for exporting data, not plots.</p>
<p>Above, we provided an example of how plots and maps generated in <strong>geode</strong> can be exported as images using the <code>png()</code> function, or as pdfs using the <code>pdf()</code> function.</p>
<p>Additionally, it is worth noting that plots and maps can be exported manually using the RStudio interface. The lower right window of RStudio has a ‘Plots’ tab (for static maps) and ‘Viewer’ tab (for interactive maps), under which is an ‘Export’ option with drop-down menu:</p>
<p><img src="Rstudio_export_screenshot.PNG" /></p>
<p>Once a map has been generated in the ‘Plots’ window (or the Viewer window, if the map is interactive), users can choose from this menu to export the map as an image, copy it to the clipboard (and then paste into another program), or even save it as a webpage (if it is an interactive map). All of these options open a preview screen that allows you to manually adjust the image size, choose the output format and specify the output location.</p>
<p><img src="Rstudio_export_screenshot2.PNG" style="width:50.0%" /></p>
<p>Although this approach requires several manual steps and is therefore not easily reproducible, it can be useful for generating experimental figures quickly.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="background.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="details.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["users_manual.pdf", "users_manual.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
